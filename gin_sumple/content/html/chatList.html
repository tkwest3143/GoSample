<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/css/style.css" />
    <title>Gin Application</title>
  </head>
  <script>
    function btnRoomCreateClick() {
      form1 = document.getElementById("form");
      form1.action = "/roomCreate";
      form1.submit;
    }
    function btnPostClick() {
      form1 = document.getElementById("form");
      form1.action = "/chatPost";
      form1.submit;
    }
  </script>
  <body>
    <form method="post" action="/chatPost" id="form">
      <div class="main-content">
        <h1>{{.roomName}}</h1>
        <input type="button" id="btnRoomCreate" value="ルームを作成する" />
        <div class="chatList">
          {{$i := .userId}} {{range .chatList}} {{if eq $i .UserID}}
          <!-- 自分が投稿したチャットの内容-->
          <div class="minePost post">
            <!--投稿者-->
            <div class="contributer">{{.Contributer}}</div>
            <!--投稿文-->
            <div class="text">{{.ChatText}}</div>
          </div>
          <br />
          {{else}}
          <!-- 自分以外が投稿したチャットの内容-->
          <div class="otherPost post">
            <!--投稿者-->
            <div class="contributer">{{.Contributer}}</div>
            <!--投稿文-->
            <div class="text">{{.ChatText}}</div>
            <br />
          </div>
          {{end}} {{end}}
        </div>
        <input
          type="text"
          name="chatText"
          placeholder="入力してください"
          style="width: 90%"
        />
        <input type="button" name="btnPost" value="投稿" style="width: 8%" />
      </div>
    </form>
    <div id="modal-area">
      <button id="openModal">ルームを作成する</button>

      <!-- モーダルエリアここから -->
      <form id="formRoomCreate">
        <section id="modalArea" class="modalArea">
          <div id="modalBg" class="modalBg"></div>
          <div class="modalWrapper">
            <div class="modalContents">
              <label for="userName">ルーム名：</label
              ><input
                type="text"
                name="roomName"
                placeholder="ルーム名を入力してください"
                required
              /><br />
              <textarea
                name="discription"
                placeholder="何をするスペースですか？"
              ></textarea>
              <label for="">招待する</label>
              <!--TODO友達一覧を表示して選択-->
              <input type="button" id="btnRoomCreate" value="作成" />
            </div>
            <div id="closeModal" class="closeModal">×</div>
          </div>
        </section>
      </form>
    </div>
    <!-- モーダルエリアここまで -->

    <!-- ↓body閉じタグ直前でjQueryを読み込む -->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script>
      $(function () {
        $("#openModal").click(function () {
          $("#modalArea").fadeIn();
        });
        $("#closeModal , #modalBg").click(function () {
          $("#modalArea").fadeOut();
        });
      });
    </script>
  </body>
</html>
